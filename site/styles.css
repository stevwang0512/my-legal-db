/* ===== 基础样式 ===== */
* { box-sizing: border-box; }
html, body { height: 100%; }
body { margin: 0; font: 14px/1.6 -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", Arial, sans-serif; color: #111827; background: #ffffff; }

/* 顶部栏 */
.topbar{
  position: sticky; top: 0; z-index: 100;
  display: grid; grid-template-columns: 200px 1fr; align-items: center; gap: 12px;
  height: 56px; padding: 0 12px; background: #0f172a; color: #fff;
  box-shadow: 0 1px 6px rgba(0,0,0,.18);
}
.brand{ font-weight: 600; }
.search{
  height: 34px; padding: 0 10px; border-radius: 8px; border: 0; outline: none; width: 100%;
}

/* 布局变量 */
:root{
  --sidebar-width: 260px;  /* 目录宽 */
  --gutter: 12px;          /* 中缝宽（放按钮） */
  --header-offset: 56px;   /* 与顶部栏等高 */
}

/* 三列布局：侧栏 | 中缝按钮 | 正文 */
.layout{
  display: grid;
  grid-template-columns: var(--sidebar-width) var(--gutter) 1fr;
  gap: 0;
  height: calc(100vh - var(--header-offset));
}

/* 侧栏 */
.sidebar{
  overflow: auto;
  border-right: 1px solid #eef2f7;
  background: #ffffff;
  padding: 12px;
}
.toc summary{ cursor: pointer; user-select: none; font-weight: 600; }
.toc ul{ margin: 6px 0 12px 18px; padding: 0; list-style: disc; }
.toc a{ color: #334155; text-decoration: none; }
.toc a:hover{ text-decoration: underline; }

/* 中缝按钮（不随侧栏隐藏） */
.toc-toggle{
  grid-column: 2;
  align-self: start;
  position: sticky;
  top: 8px;                /* 按钮在中缝内的上边距 */
  margin-top: 8px;
  width: var(--gutter);
  min-width: var(--gutter);
  height: 40px;
  display: inline-flex; align-items: center; justify-content: center;
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  background: #fff;
  box-shadow: 0 1px 4px rgba(0,0,0,.06);
  cursor: pointer;
  z-index: 10;
  padding: 0;
}

/* 正文 */
.content{
  overflow: auto;
  padding: 16px 24px;
  /* 可选：限制行宽提升可读性 */
  max-width: 980px;
  width: 100%;
  margin: 0 auto;
}

/* 收起态：把第一列宽度设为 0，同时禁用侧栏交互 */
body.sidebar-collapsed .layout{
  grid-template-columns: 0 var(--gutter) 1fr;
}
body.sidebar-collapsed .sidebar{
  visibility: hidden;
  pointer-events: none;
}

/* 响应式：小屏默认收起 */
@media (max-width: 960px){
  :root{ --sidebar-width: 240px; }
}
