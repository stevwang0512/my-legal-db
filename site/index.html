<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>My Legal DB</title>
  <style>
    :root { --toc-w: 320px; --gutter-w: 12px; }
    html, body { height:100%; margin:0; }
    body { display:flex; flex-direction:column; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; }
    header { display:flex; align-items:center; gap:12px; padding:10px 12px; border-bottom:1px solid #eee; position:sticky; top:0; background:#fff; z-index:20; }
    #searchbar { flex:1; display:flex; align-items:center; gap:8px; }
    #q { flex:1; padding:8px 10px; border:1px solid #ddd; border-radius:8px; }
    #hit-info { white-space:nowrap; font-size:12px; color:#666; }
    #search-tip { position:absolute; left:12px; right:12px; top:48px; color:#666; font-size:12px; text-align:right; }
    main { display:grid; grid-template-columns: var(--toc-w) var(--gutter-w) 1fr; height: calc(100vh - 56px); }
    aside#toc { overflow:auto; border-right:1px solid #eee; }
    #gutter { display:flex; align-items:center; justify-content:center; border-right:1px solid #eee; }
    #toc-toggle { width: 16px; height: 32px; border:1px solid #ddd; border-radius:6px; background:#fff; cursor:pointer; }
    section { position:relative; overflow:auto; }
    #breadcrumb { font-size:12px; color:#666; padding:8px 12px; border-bottom:1px solid #f1f1f1; display:flex; gap:6px; flex-wrap:wrap; }
    #breadcrumb a { color:#0366d6; text-decoration:none; }
    #viewer { padding: 16px 24px 80px; max-width: 1100px; }
    .crumb-sep::before { content: "/"; color:#aaa; margin:0 4px; }
    .toc-section-title { font-weight:600; padding:8px 10px; }
    .toc-toolbar { display:flex; align-items:center; justify-content:space-between; padding:8px 10px; border-bottom:1px solid #f3f3f3; position:sticky; top:0; background:#fff; z-index:5;}
    #filetree, #page-toc { padding:6px 6px 10px; }
    #filetree .dir { margin-left: 8px; }
    #filetree .dir > .header { display:flex; align-items:center; gap:6px; cursor:pointer; padding:4px 2px; border-radius:6px; }
    #filetree .dir > .header:hover { background:#f7f7f7; }
    #filetree .children { margin-left: 12px; }
    #filetree a.file { display:block; padding:3px 2px; border-radius:6px; text-decoration:none; color:#222; }
    #filetree a.file:hover { background:#f5f5f5; }
    #page-toc a { display:block; padding:3px 2px; text-decoration:none; color:#222; border-radius:6px; }
    #page-toc a.active { background:#e8f0fe; }
    mark.search-hit { background: #ffeb3b; padding:0 2px; }
    mark.search-current { background: #ffd54f; outline: 1px solid #ff9800; }
    body.sb-collapsed main { grid-template-columns: 0 var(--gutter-w) 1fr; }
    body.sb-collapsed aside#toc { display:none; }
    @media (max-width: 880px) {
      :root { --toc-w: 280px; }
      header { gap:8px; }
      #search-tip { position:static; text-align:left; padding:0 12px 6px; }
    }
  </style>
</head>
<body>
  <header>
    <strong>My Legal DB</strong>
    <div id="searchbar">
      <input id="q" type="search" placeholder="在当前文档内搜索（支持多命中）…" />
      <button id="prev-hit" title="上一个">⬆️</button>
      <button id="next-hit" title="下一个">⬇️</button>
      <span id="hit-info">0 / 0</span>
    </div>
    <div style="min-width:12px;"></div>
  </header>
  <div id="search-tip">提示：目前仅支持“当前文档内”的全文搜索；请先在左侧选择一个文档。</div>
  <main>
    <aside id="toc">
      <div class="toc-toolbar">
        <span id="toc-title">文档/目录</span>
        <button id="toc-mode" title="切换文件树/本页目录">切换</button>
      </div>
      <div id="filetree"></div>
      <div id="page-toc" style="display:none"></div>
    </aside>
    <div id="gutter"><button id="toc-toggle" aria-controls="toc" title="收起目录">❮</button></div>
    <section>
      <nav id="breadcrumb"></nav>
      <article id="viewer">在左侧选择文档，或在上方搜索</article>
    </section>
  </main>

  <script src="assets/marked.min.js"></script>
  <script src="assets/app.js"></script>
</body>
</html>
